- name: Create new volume with a QoS limit with 0 Bandwidth QoS and 0 iops_qos
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    size: "{{ volume_size }}"
    bw_qos: 0
    iops_qos: 0
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Create new volume in pod in a protection group
  purefa_volume:
    hosts: all
    name: "{{ pod_name }}::{{ volume_name }}"
    prgoup: "{{ prgroup_name }}"
    size: "{{ volume_size }}"
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Create X volumes with index starting at start_at_volume_index but padded with 3 digits
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    size: "{{ volume_size }}"
    suffix: "{{ volume_suffix }}"
    count: "{{ volume_count }}"
    start: "{{ start_at_volume_index }}"
    digits: 3
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Extend the size of an existing volume named volume_name
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    size: "{{ new_volume_size_extent }}"
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Delete and eradicate volume named volume_name
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    eradicate: yes
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: absent

- name: Create clone of volume target_volume named new_volume_name
  purefa_volume:
    hosts: all
    name: "{{ new_volume_name }}"
    target: "{{ target_volume }}"
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Overwrite volume target_volume with volume volume_name
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    target: "{{ target_volume }}"
    overwrite: yes
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Clear volume QoS from volume volume_name
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    bw_qos: 0
    iops_qos: 0
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
    state: present

- name: Move local volume volume_name from local array to pod pod_name
  purefa_volume:
    hosts: all
    name: "{{ volume_name }}"
    move: "{{ pod_name }}"
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"

- name: Move volume "{{ volume_name }}" in pod "{{ pod_name }}" to local array
  purefa_volume:
    hosts: all
    name: "{{ pod_name }}"::"{{ volume_name }}"
    move: local
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"

- name: Move volume "{{ volume_name }}" in pod "{{ target_volume }}" to vgroup vgroup_name
  purefa_volume:
    hosts: all
    name: "{{ target_volume }}"::"{{ volume_name }}"
    move: "{{ vgroup_name }}"
    fa_url: "{{ dst_array_ip }}"
    api_token: "{{ dst_array_api }}"
